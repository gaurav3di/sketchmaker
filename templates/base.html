<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: ['class', '[data-theme="dark"]'],
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    screens: {
                        'xs': '375px',
                        'sm': '640px',
                        'md': '768px',
                        'lg': '1024px',
                        'xl': '1280px',
                        '2xl': '1536px',
                    },
                },
            },
            daisyui: {
                themes: [
                    {
                        light: {
                            "primary": "#a855f7",
                            "primary-focus": "#9333ea",
                            "primary-content": "#ffffff",
                            "secondary": "#f472b6",
                            "secondary-focus": "#ec4899",
                            "secondary-content": "#ffffff",
                            "accent": "#22d3ee",
                            "accent-focus": "#06b6d4",
                            "accent-content": "#ffffff",
                            "neutral": "#f3f4f6",
                            "neutral-focus": "#e5e7eb",
                            "neutral-content": "#1f2937",
                            "base-100": "#ffffff",
                            "base-200": "#f3f4f6",
                            "base-300": "#e5e7eb",
                            "base-content": "#1f2937",
                            "info": "#06b6d4",
                            "success": "#10b981",
                            "warning": "#f59e0b",
                            "error": "#ef4444"
                        },
                        dark: {
                            "primary": "#a855f7",
                            "primary-focus": "#9333ea",
                            "primary-content": "#ffffff",
                            "secondary": "#f472b6",
                            "secondary-focus": "#ec4899",
                            "secondary-content": "#ffffff",
                            "accent": "#22d3ee",
                            "accent-focus": "#06b6d4",
                            "accent-content": "#ffffff",
                            "neutral": "#1e293b",
                            "neutral-focus": "#0f172a",
                            "neutral-content": "#ffffff",
                            "base-100": "#0f172a",
                            "base-200": "#1e293b",
                            "base-300": "#334155",
                            "base-content": "#e2e8f0",
                            "info": "#06b6d4",
                            "success": "#10b981",
                            "warning": "#f59e0b",
                            "error": "#ef4444"
                        }
                    }
                ],
                darkTheme: "dark",
            },
        }
    </script>
    <style>
        /* Modern scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--fallback-b2,oklch(var(--b2)));
        }
        ::-webkit-scrollbar-thumb {
            background: var(--fallback-b3,oklch(var(--b3)));
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--fallback-bc,oklch(var(--bc)/0.5));
        }
        
        /* Better form styling */
        .input, .select, .textarea {
            background-color: var(--fallback-b2,oklch(var(--b2))) !important;
            border-color: var(--fallback-b3,oklch(var(--b3))) !important;
            color: var(--fallback-bc,oklch(var(--bc))) !important;
        }
        .input:focus, .select:focus, .textarea:focus {
            border-color: var(--fallback-p,oklch(var(--p))) !important;
            box-shadow: 0 0 0 2px var(--fallback-p,oklch(var(--p)/0.2)) !important;
        }
        .label-text {
            color: var(--fallback-bc,oklch(var(--bc))) !important;
            font-weight: 500 !important;
        }
        .label-text-alt {
            color: var(--fallback-bc,oklch(var(--bc)/0.7)) !important;
        }
        
        /* Card styling */
        .card {
            backdrop-filter: blur(12px);
            background-color: var(--fallback-b2,oklch(var(--b2)/0.8)) !important;
            border: 1px solid var(--fallback-b3,oklch(var(--b3)/0.5));
        }
        
        /* Button styling */
        .btn {
            text-transform: none !important;
            font-weight: 500 !important;
        }
        
        /* Text styling */
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            letter-spacing: -0.025em;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            letter-spacing: -0.025em;
        }

        /* Mobile optimizations */
        @media (max-width: 640px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            .navbar {
                padding: 0.5rem 1rem;
            }
            .btn {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            .card {
                margin-left: -1rem;
                margin-right: -1rem;
                border-radius: 0;
            }
            .text-4xl {
                font-size: 2rem;
            }
            .text-3xl {
                font-size: 1.75rem;
            }
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body class="min-h-screen bg-gradient-to-br from-base-100 via-base-200 to-base-300">
    {% if current_user.is_authenticated %}
    <div class="navbar bg-base-200/50 backdrop-blur-lg border-b border-base-300">
        <div class="navbar-start">
            <a href="{{ url_for('core.dashboard') }}" class="btn btn-ghost text-xl">Sketchmaker</a>
        </div>
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1">
                <li><a href="{{ url_for('core.dashboard') }}" class="btn btn-ghost">Dashboard</a></li>
                <li><a href="{{ url_for('gallery.gallery') }}" class="btn btn-ghost">Gallery</a></li>
                {% if current_user.is_admin() %}
                <li><a href="{{ url_for('admin.manage') }}" class="btn btn-ghost">Manage Users</a></li>
                {% endif %}
            </ul>
        </div>
        <div class="navbar-end">
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle avatar">
                    <div class="w-10 rounded-full bg-primary/10 flex items-center justify-center">
                        <span class="text-primary">{{ current_user.username[0].upper() }}</span>
                    </div>
                </label>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-base-200 rounded-box w-52">
                    <li><a href="{{ url_for('core.settings') }}">Settings</a></li>
                    <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
    {% endif %}
    
    {% block content %}{% endblock %}
    
    <script>
        // Set default theme to dark
        if (!localStorage.getItem('theme')) {
            localStorage.setItem('theme', 'dark');
        }
        // Apply theme from localStorage
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'));
        
        // Update theme controller state if it exists
        const themeController = document.querySelector('.theme-controller');
        if (themeController) {
            themeController.checked = localStorage.getItem('theme') === 'dark';
        }
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
